/* ===========================
   NutriTrack — Goals (Liquid Glass Ultimate)
   ============================ */

/* ---- 1. CONFIGURACIÓN BASE Y FONDO ---- */
:root {
  /* Colores Base */
  --bg: #07111f;
  --panel: #0d192b;
  --panel-2: #0a1424;
  --line: #21344a;
  --text: #e9f2ff;
  --muted: #9fb4c9;
  
  /* Marca */
  --brand: #23d1c0;
  --accent: #8b7cf7;
  
  /* Métricas */
  --radius: 14px;
  --shadow-soft: 0 10px 26px rgba(0, 0, 0, 0.18);
}

* { box-sizing: border-box; }

html, body { height: 100%; }

body {
  margin: 0;
  color: var(--text);
  font: 14px/1.5 ui-sans-serif, system-ui, sans-serif;
  background-color: var(--bg);
  /* Fondo base sólido */
  background: #050a14;
  overflow-x: hidden; /* Evita scroll horizontal por los efectos */
}

/* EFECTO "RUIDO" SUAVE (Textura) */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -1;
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
  opacity: 0.4;
}

/* EFECTO AURORA (FONDO): Manchas de luz en el fondo */
body::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: -2;
  background:
    /* Luz Teal arriba derecha */
    radial-gradient(900px 600px at 90% -10%, rgba(35, 209, 192, 0.15), transparent 60%),
    /* Luz Violeta abajo izquierda */
    radial-gradient(800px 700px at 10% 110%, rgba(139, 124, 247, 0.12), transparent 60%),
    /* Luz central muy sutil */
    radial-gradient(circle at 50% 50%, rgba(35, 209, 192, 0.03), transparent 50%);
  filter: blur(60px); /* Difumina todo para que sea suave */
}


/* =========================================
   2. SISTEMA DE COLORES DINÁMICOS (Hues)
   ========================================= */
/* Estas clases (.pill-X) se asignan dinámicamente desde Angular.
   --c-solid: Color fuerte para bordes, textos e iconos.
   --c-glow:  Color translúcido para el efecto "líquido" interno.
*/

.pill-0 { --c-solid: #23d1c0; --c-glow: rgba(35, 209, 192, 0.18); } /* Teal */
.pill-1 { --c-solid: #a78bfa; --c-glow: rgba(167, 139, 250, 0.18); } /* Violeta */
.pill-2 { --c-solid: #60a5fa; --c-glow: rgba(96, 165, 250, 0.18); } /* Azul */
.pill-3 { --c-solid: #fbbf24; --c-glow: rgba(251, 191, 36, 0.18); } /* Ámbar */
.pill-4 { --c-solid: #f472b6; --c-glow: rgba(244, 114, 182, 0.18); } /* Rosa */
.pill-5 { --c-solid: #a3e635; --c-glow: rgba(163, 230, 53, 0.18); } /* Lima */
.pill-6 { --c-solid: #f87171; --c-glow: rgba(248, 113, 113, 0.18); } /* Rojo */
.pill-7 { --c-solid: #818cf8; --c-glow: rgba(129, 140, 248, 0.18); } /* Indigo */
.pill-8 { --c-solid: #22d3ee; --c-glow: rgba(34, 211, 238, 0.18); } /* Cian */
.pill-9 { --c-solid: #34d399; --c-glow: rgba(52, 211, 153, 0.18); } /* Esmeralda */
.pill-10 { --c-solid: #e879f9; --c-glow: rgba(232, 121, 249, 0.18); } /* Fucsia */
.pill-11 { --c-solid: #94a3b8; --c-glow: rgba(148, 163, 184, 0.18); } /* Gris */


/* =========================================
   3. TARJETAS DE META (Cubos Liquid Glass)
   ========================================= */
.goal-card {
  /* Fallback (Teal) por si acaso */
 
  --c-glow: rgba(35, 209, 192, 0.15);

  position: relative;
  border-radius: 18px;
  padding: 16px;
  text-align: left;
  overflow: hidden;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);

  /* Fondo Glass oscuro */
  background: linear-gradient(180deg, rgba(14, 25, 46, 0.6), rgba(10, 20, 36, 0.9));
  backdrop-filter: blur(8px);
  
  /* Borde fino */
  border: 1px solid rgba(255, 255, 255, 0.08);
  
  /* Borde izquierdo CLAVE: Usa el color sólido de la meta */
  border-left: 3px solid var(--c-solid); 
  
  /* EFECTO HUE: Sombra interna usando el color glow */
  box-shadow: inset 0 0 50px var(--c-glow);
}

/* Línea de luz superior */
.goal-card::after {
  content: "";
  position: absolute;
  inset: 0 0 auto 0;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--c-solid), transparent);
  opacity: 0.5;
}

/* Hover: Intensifica el color */
.goal-card:hover {
  transform: translateY(-3px);
  border-color: var(--c-solid); /* Todo el borde toma color */
  background: linear-gradient(180deg, rgba(14, 25, 46, 0.8), rgba(10, 20, 36, 1));
  
  /* Intensificamos el glow interno */
  box-shadow: 
    inset 0 0 60px var(--c-glow),
    0 10px 30px -10px var(--c-glow); 
}

/* Icono coloreado */
.goal-card .icon-box { color: var(--c-solid); }

/* Badge Activo/Inactivo */
.badge {
  font-size: 12px;
  padding: 4px 8px;
  border-radius: 999px;
  border: 1px solid var(--c-solid);
  color: var(--c-solid);
  background: var(--c-glow);
}

/* Estado Inactivo (Apagado y Gris) */
.goal-card.card-inactive {
  filter: grayscale(1) opacity(0.7); /* Convierte a escala de grises */
  box-shadow: none; /* Quita el brillo */
  border-left-color: #444;
  background: #0b101a;
}
.goal-card.card-inactive .badge {
  background: transparent;
  border-color: #555;
  color: #777;
}


/* =========================================
   4. CALENDARIO (Pastillas del mismo color)
   ========================================= */
.goals-month {
  margin: 60px auto 30px;
  padding: 24px;
  border-radius: 20px;
  max-width: 100%;
  
  /* Fondo del calendario estilo Glass mejorado */
  background: linear-gradient(145deg, rgba(13, 24, 42, 0.95), rgba(7, 13, 24, 0.98));
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 15px 35px rgba(0, 0, 0, 0.4), 0 5px 15px rgba(0, 0, 0, 0.3);
  position: relative;
  overflow: hidden;
  backdrop-filter: blur(12px);
  
  /* Borde sutil */
  border-top: 1px solid rgba(255, 255, 255, 0.05);
  border-right: 1px solid rgba(255, 255, 255, 0.05);
}

/* Luz ambiental en el calendario */
.goals-month::before {
  content: "";
  position: absolute;
  top: -50%; left: -50%; width: 200%; height: 200%;
  background: radial-gradient(circle at 50% 50%, rgba(35, 209, 192, 0.03), transparent 70%);
  pointer-events: none;
}

.month-goal-pill {
  display: block;
  width: 100%;
  margin-bottom: 3px;
  padding: 4px 8px;
  border-radius: 6px;
  font-size: 11px;
  font-weight: 600;
  white-space: nowrap;
  background: rgba(255, 255, 255, 0.05);
  border-left: 2px solid var(--c-solid);
  transition: all 0.2s ease;
  color: var(--text);
  opacity: 0.9;
  overflow: hidden;
  text-overflow: ellipsis;
  
  /* AQUI CONECTAMOS: Usa las mismas variables que la tarjeta */
  background-color: var(--c-glow);
  border-left: 3px solid var(--c-solid);
  color: #e0fbff;
}

.month-goal-pill.inactive {
  background: rgba(148, 163, 184, 0.1) !important;
  border-left-color: #64748b !important;
  color: #94a3b8 !important;
  text-decoration: line-through;
  opacity: 0.6;
}


/* =========================================
   5. MODAL / DIALOG (Estilo Liquid Glass)
   ========================================= */
.sheet-backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.7);
  backdrop-filter: blur(6px);
  z-index: 99;
}

.dialog {
  position: fixed;
  top: 50%; left: 50%;
  transform: translate(-50%, -50%);
  width: min(600px, 94vw);
  max-height: 90vh;
  overflow-y: auto;
  z-index: 100;
  display: flex;
  flex-direction: column;

  /* Estilo Liquid para el Modal */
  background: linear-gradient(180deg, rgba(13, 25, 43, 0.95), rgba(9, 15, 25, 0.98));
  border: 1px solid rgba(35, 209, 192, 0.3); /* Borde Teal sutil */
  border-radius: 16px;
  
  /* Brillo interno Teal */
  box-shadow: 
    0 25px 50px -12px rgba(0, 0, 0, 0.5),
    inset 0 0 60px rgba(35, 209, 192, 0.08); 
}

/* Cabecera */
.dialog-header {
  padding: 16px 20px;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  background: rgba(35, 209, 192, 0.03);
}
.dialog-header .row { display: flex; align-items: center; gap: 10px; color: var(--brand); }
.dialog-header h3 { margin: 0; font-size: 18px; color: #fff; }

/* Cuerpo */
.dialog-body {
  padding: 20px;
  display: grid;
  gap: 18px;
}

/* Footer */
.dialog-footer {
  padding: 16px 20px;
  border-top: 1px solid rgba(255, 255, 255, 0.08);
  display: flex;
  justify-content: flex-end;
  gap: 10px;
  background: rgba(0, 0, 0, 0.2);
}

/* INPUTS ESTILIZADOS (Glass) */
.field { display: grid; gap: 6px; }
.field span { color: var(--muted); font-size: 13px; font-weight: 500; }

/* Estilo para inputs de fecha */
input[type="date"],
.date-input {
  width: 100%;
  background: rgba(0, 0, 0, 0.4);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 10px;
  padding: 12px 14px;
  color: #fff;
  font-size: 14px;
  transition: all 0.2s;
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  position: relative;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%239fb4c9' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='4' width='18' height='18' rx='2' ry='2'%3E%3C/rect%3E%3Cline x1='16' y1='2' x2='16' y2='6'%3E%3C/line%3E%3Cline x1='8' y1='2' x2='8' y2='6'%3E%3C/line%3E%3Cline x1='3' y1='10' x2='21' y2='10'%3E%3C/line%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 12px center;
  background-size: 16px;
  padding-right: 40px;
}

/* Estilo para cuando el input de fecha está enfocado */
input[type="date"]:focus,
.date-input:focus {
  border-color: var(--brand);
  box-shadow: 0 0 0 3px rgba(35, 209, 192, 0.15);
  background-color: rgba(0, 0, 0, 0.5);
  outline: none;
}

/* Estilo para el calendario desplegable */
input[type="date"]::-webkit-calendar-picker-indicator {
  opacity: 0;
  position: absolute;
  right: 0;
  top: 0;
  width: 100%;
  height: 100%;
  cursor: pointer;
}

/* Estilo para los demás inputs */
input[type="text"],
input[type="number"],
textarea {
  width: 100%;
  background: rgba(0, 0, 0, 0.3);
  border: 1px solid rgba(255, 255, 255, 0.15);
  border-radius: 10px;
  padding: 12px;
  color: #fff;
  font-size: 14px;
  transition: all 0.2s;
}

input:focus, textarea:focus {
  outline: none;
  border-color: var(--brand);
  box-shadow: 0 0 0 3px rgba(35, 209, 192, 0.15);
  background: rgba(0, 0, 0, 0.5);
}

.goal-week-row { display: flex; align-items: center; gap: 10px; }
.week-input { width: 80px !important; text-align: center; font-weight: bold; color: var(--brand); }
.week-label { color: var(--muted); font-size: 13px; }
.date-row { display: flex; gap: 14px; }
.date-field { flex: 1; }


/* =========================================
   6. LAYOUT GENERAL Y UTILIDADES
   ========================================= */

/* Topbar */
.topbar {
  position: sticky; top: 0; z-index: 10;
  display: flex; justify-content: space-between; align-items: center;
  padding: 12px 20px;
  background: rgba(10, 20, 36, 0.85);
  backdrop-filter: blur(12px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
}
.topbar .title { margin: 0; font-size: 18px; display: flex; align-items: center; gap: 8px; }
.topbar .muted { margin: 2px 0 0; color: var(--muted); font-weight: 500; font-size: 13px; }
.brand-icon { color: var(--brand); }

/* Botones */
.btn {
  display: inline-flex; align-items: center; gap: 8px;
  padding: 8px 14px; border-radius: 10px;
  font-weight: 500; cursor: pointer;
  border: 1px solid rgba(255, 255, 255, 0.15);
  background: rgba(255, 255, 255, 0.05);
  color: #e9f2ff;
  transition: all 0.2s;
}
.btn:hover { background: rgba(255, 255, 255, 0.1); }
.btn.primary {
  background: var(#095505);
  border-color: var(--brand);
  color: #14f608;
  font-weight: 600;
}
.btn.primary:hover { filter: brightness(1.1); }
.btn.btn-danger {
  color: #fca5a5; border-color: rgba(239, 68, 68, 0.4);
  background: rgba(239, 68, 68, 0.1);
}
.btn.btn-danger:hover { background: rgba(239, 68, 68, 0.2); }

/* Layout */
.content { padding: 10px 0 28px; }
.container { width: min(1120px, 94vw); margin: 0 auto; padding-bottom: 40px; }
.page-main { min-height: calc(100vh - 120px); }
.scroll-area { padding: 8px 6px 24px; }

/* Grid */
.grid { display: grid; gap: 12px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); }
.section-title { color: var(--muted); font-weight: 600; margin: 0 0 4px 0; }
.grid .section-title { grid-column: 1 / -1; }

/* Detalles de Tarjeta (Internos) */
.card-head .title-wrap { display: flex; align-items: center; justify-content: space-between; gap: 10px; }
.row.goal-header { display: flex; align-items: center; gap: 10px; }
.card-head h3 { margin: 0; font-size: 15px; font-weight: 700; color: #fff; }
.card-head h3.inactive { text-decoration: line-through; color: #777; }
.desc { margin: 4px 0 0; color: var(--muted); font-size: 13px; }
.card-actions { margin-top: 12px; display: flex; gap: 8px; }
.card-actions .btn { flex: 1; justify-content: center; }

/* Switch */
/* Switch */
.switch {
  position: relative;
  display: inline-flex;
  align-items: center;
  width: 44px;
  height: 24px;
  border-radius: 999px;
  border: 1px solid #444;
  background: #0d1726;
  cursor: pointer;
  transition: all 0.2s;
  padding: 0;
}

.switch .dot {
  position: absolute;
  left: 3px;
  top: 3px;
  width: 18px;
  height: 18px;
  border-radius: 50%;
  background: #fff; /* Fondo blanco para mejor contraste */
  transition: all 0.2s;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); /* Sombra para dar profundidad */
}

/* Estado activo */
.switch[aria-checked="true"] {
  border-color: var(--brand);
  background: var(--brand);
}

.switch[aria-checked="true"] .dot {
  left: 22px;
  background: #fff; /* Aseguramos que el punto sea blanco */
}

/* Mes Header */
.month-header-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
.month-title h4 { margin: 0; font-size: 16px; }
.month-title p { margin: 0; color: var(--muted); font-size: 13px; }
.month-nav { display: flex; gap: 8px; align-items: center; }
.month-nav-btn { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); color: #fff; border-radius: 8px; cursor: pointer; padding: 6px; display: flex; }
.month-nav-btn:hover { background: rgba(255,255,255,0.1); }
.month-chip { background: rgba(35, 209, 192, 0.1); color: var(--brand); padding: 4px 12px; border-radius: 20px; border: 1px solid rgba(35, 209, 192, 0.3); font-size: 13px; font-weight: 600; }

/* Mes Grid */
.month-grid { display: grid; grid-template-columns: repeat(7, 1fr); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; overflow: hidden; }
.month-cell { border-right: 1px solid rgba(255,255,255,0.06); border-bottom: 1px solid rgba(255,255,255,0.06); padding: 6px; min-height: 85px; background: rgba(255,255,255,0.01); }
.month-cell:nth-child(7n) { border-right: none; }
.month-head { background: rgba(255,255,255,0.03); text-align: center; font-weight: 600; padding: 10px; min-height: auto; color: var(--muted); font-size: 12px; text-transform: uppercase; letter-spacing: 1px; }
.month-day-header { text-align: right; font-size: 12px; margin-bottom: 6px; color: #64748b; font-weight: 500; }
.month-cell.today { background: rgba(35, 209, 192, 0.05); }
.month-cell.today .month-day-header { color: var(--brand); font-weight: bold; }
.month-cell.outside { opacity: 0.3; background: transparent; }

/* Utils */
.back { background: transparent; border: none; color: var(--muted); cursor: pointer; display: flex; align-items: center; gap: 6px; }
.back:hover { color: var(--text); }
.loading { color: var(--muted); padding: 24px; }
.alert { margin: 10px 0 4px; padding: 10px 12px; border-radius: 10px; font-size: 13px; display: flex; align-items: center; gap: 8px; }
.field-error { color: #f97373; font-size: 12px; margin-top: 4px; }
.row { display: flex; align-items: center; gap: 8px; }
.m0 { margin: 0; }

/* Scrollbars */
::-webkit-scrollbar { width: 8px; height: 8px; }
::-webkit-scrollbar-track { background: rgba(0,0,0,0.2); }
::-webkit-scrollbar-thumb { background: #2b384b; border-radius: 4px; }
::-webkit-scrollbar-thumb:hover { background: #3d4c63; }


/* Estilos para el calendario desplegable (date picker) */
input[type="date"]::-webkit-datetime-edit { 
  color: #e9f2ff; /* Color del texto de la fecha */
}

input[type="date"]::-webkit-calendar-picker-indicator {
  filter: invert(0.7); /* Invierte el color del ícono para mejor visibilidad */
  cursor: pointer;
  padding: 4px;
  border-radius: 4px;
  background: rgba(255, 255, 255, 0.1);
}

/* Para el fondo del calendario desplegable */
input[type="date"]::-webkit-calendar-picker-indicator:hover {
  background: rgba(18, 78, 112, 0.2);
}

/* Para navegadores que soportan color-scheme */
@media (prefers-color-scheme: dark) {
  input[type="date"] {
    color-scheme: dark;
  }
}

/* Para el día seleccionado en el date picker */
input[type="date"]::-webkit-datetime-edit-fields-wrapper {
  background: transparent;
}

/* Para navegadores basados en WebKit (Chrome, Safari, Edge) */
input[type="date"]::-webkit-inner-spin-button,
input[type="date"]::-webkit-outer-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

/* Para Firefox */
@-moz-document url-prefix() {
  input[type="date"] {
    color: #e9f2ff;
  }
  
  input[type="date"]::-moz-focus-inner {
    border: 0;
  }
}

/* Estilo oscuro para flechas de inputs numéricos (WebKit: Chrome, Edge, etc.) */
input[type="number"] {
  background: #050a14;
  color: #e9f2ff;
  border-radius: 10px;
}

/* Truco: oscurecer el control completo con filtro */
input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
  filter: invert(0.8) brightness(0.8); /* las hace más claras sobre fondo oscuro */
}

.empty {
  text-align: left;
  padding: 32px 8px;
}

.empty-icon {
  margin-bottom: 12px;
}

.icon-32 {
  width: 32px;
  height: 32px;
}
